CC = gcc
CFLAGS = -Wall -Wextra -g
TARGETS = fork_example fork_wait_example fork_exec_example pipe_example zombie_example orphan_example

.PHONY: all clean run-all

all: $(TARGETS)

fork_example: fork_example.c
	$(CC) $(CFLAGS) -o $@ $<

fork_wait_example: fork_wait_example.c
	$(CC) $(CFLAGS) -o $@ $<

fork_exec_example: fork_exec_example.c
	$(CC) $(CFLAGS) -o $@ $<

pipe_example: pipe_example.c
	$(CC) $(CFLAGS) -o $@ $<

zombie_example: zombie_example.c
	$(CC) $(CFLAGS) -o $@ $<

orphan_example: orphan_example.c
	$(CC) $(CFLAGS) -o $@ $<

run-all: all
	@echo "Running fork_example"
	./fork_example
	@echo "Running fork_wait_example"
	./fork_wait_example
	@echo "Running fork_exec_example"
	./fork_exec_example
	@echo "Running pipe_example"
	./pipe_example
	@echo "Running zombie_example (you may want to run this in its own terminal to inspect 'ps')"
	./zombie_example
	@echo "Running orphan_example"
	./orphan_example

clean:
	$(RM) $(TARGETS) *.o